# 重复字符智能压缩功能

## 功能说明

为了解决某些SRT文件中包含大量重复字符导致AI模型卡死的问题，程序新增了智能压缩功能。

## 工作原理

当检测到文本中包含大量重复字符时，程序会自动将其压缩为简洁格式，然后进行翻译。

### 压缩规则

1. **连续重复字符**：如 `あああああ` → `あ*5`
2. **分散重复字符**：如 `お、お、お、お、お、お、お、お` → `お*8`

### 触发条件

- 连续重复：同一字符连续出现4次及以上
- 分散重复：同一字符在文本中出现8次及以上

## 实际效果示例

### 原文：
```
お、お、お、お、お、お、お、お、お、お、お、おはようございます。
```

### 压缩后：
```
お*12はようございます。
```

### 翻译后可能的结果：
```
哦*12早上好。
```

## 优势

1. **避免卡死**：防止AI模型因重复字符陷入无限循环
2. **保留原意**：压缩后的文本仍能正确表达原意
3. **继续翻译**：不再跳过问题句子，而是继续翻译
4. **用户友好**：在界面中显示压缩统计信息

## 界面显示

- 状态栏：`正在翻译... (138/621) (已压缩 2 条)`
- 预览窗口：`[138/621] [已压缩] 原文: ... 译文: ...`
- 最终报告：`翻译完成！共处理 621 条字幕，其中 2 条自动压缩` 